@model IEnumerable<FlowerShop_WebApp.Models.Products.ProductViewModel>
@{
    ViewData["Title"] = "Quản lý Sản phẩm";
}

<div class="page-header">
    <h1 class="h2">@ViewData["Title"]</h1>
</div>

<div class="card management-card">
    <div class="card-header">
        <a asp-action="Create" class="btn btn-primary"><i class="fas fa-plus me-2"></i>Thêm sản phẩm mới</a>
        <form asp-action="Index" method="get" class="d-flex" style="width: 300px;">
            <input type="text" name="searchString" value="@ViewBag.CurrentFilter" class="form-control me-2" placeholder="Tìm theo tên..." />
            <button type="submit" class="btn btn-outline-primary"><i class="fas fa-search"></i></button>
        </form>
    </div>
    <div class="card-body p-0">
        <table class="table table-hover table-striped mb-0">
            <thead class="table-light">
                <tr>
                    <th style="width: 40%;">Tên sản phẩm</th>
                    <th>Danh mục</th>
                    <th>Giá</th>
                    <th class="text-center">Tồn kho</th>
                    <th class="text-center">Trạng thái</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model)
                {
                    <tr>
                        <td>
                            <div class="d-flex align-items-center">
                                <img src="@(item.ImageUrls?.FirstOrDefault() ?? "https://via.placeholder.com/150")" class="product-image-thumb me-3" />
                                <strong>@item.Name</strong>
                            </div>
                        </td>
                        <td>@item.CategoryName</td>
                        <td>@item.Price.ToString("N0") VND</td>
                        <td class="text-center">@item.StockQuantity</td>
                        <td class="text-center">
                            @if (item.IsActive)
                            {
                                <span class="badge bg-success">Hoạt động</span>
                            }
                            else
                            {
                                <span class="badge bg-secondary">Ẩn</span>
                            }
                        </td>
                        <td class="text-end">
                            <a asp-action="Edit" asp-route-id="@item.ProductId" class="btn btn-sm btn-outline-secondary" title="Sửa"><i class="fas fa-edit"></i></a>
                            <a asp-action="Delete" asp-route-id="@item.ProductId" class="btn btn-sm btn-outline-danger" title="Xóa"><i class="fas fa-trash"></i></a>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>

@section Styles {
    <link rel="stylesheet" href="~/css/admin-management.css" asp-append-version="true" />
}