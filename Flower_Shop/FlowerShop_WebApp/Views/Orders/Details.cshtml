@model FlowerShop_WebApp.Models.Orders.OrderViewModel
@{
    ViewData["Title"] = $"Chi tiết Đơn hàng #{Model.OrderId.ToString().Substring(0, 8)}";
    Func<string, string> getStatusBadgeClass = status => status switch
   {
       "Pending" => "bg-warning text-dark",
       "Accepted" => "bg-success",
       _ => "bg-secondary"
   };
}

<div class="container mt-5">
    <h1 class="page-section-title">@ViewData["Title"]</h1>

    <div class="row">
        <div class="col-lg-4">
            <div class="order-detail-card">
                <div class="card-header">
                    <h5><i class="fas fa-info-circle me-2"></i>Thông tin chung</h5>
                </div>
                <ul class="list-group list-group-flush">
                    <li class="list-group-item">
                        <span>Ngày đặt hàng:</span>
                        <span class="fw-bold">@Model.CreatedAt.ToString("f")</span>
                    </li>
                    <li class="list-group-item">
                        <span>Trạng thái đơn:</span>
                        <span class="badge rounded-pill bg-success">@Model.Status</span>
                    </li>
                    <li class="list-group-item">
                        <span>P.thức thanh toán:</span>
                        <span class="fw-bold">@Model.PaymentMethod</span>
                    </li>
                    <li class="list-group-item">
                        <span>Trạng thái T.toán:</span>
                        <span class="badge rounded-pill @getStatusBadgeClass(Model.PaymentStatus ?? string.Empty)">
                            @Model.PaymentStatus
                        </span>
                    </li>
                    <li class="list-group-item">
                        <span>Địa chỉ giao hàng:</span>
                        <span class="fw-bold text-end">@Model.ShippingAddress</span>
                    </li>
                    <li class="list-group-item list-group-item-light">
                        <strong class="text-uppercase">Tổng cộng:</strong>
                        <strong class="text-danger fs-5">@Model.Total.ToString("N0") VND</strong>
                    </li>
                </ul>
            </div>
            <a asp-action="History" class="btn btn-secondary w-100">
                <i class="fas fa-arrow-left me-2"></i>Quay lại Lịch sử
            </a>
        </div>

        <div class="col-lg-8">
            <div class="order-detail-card">
                <div class="card-header">
                    <h5><i class="fas fa-box-open me-2"></i>Các sản phẩm trong đơn</h5>
                </div>
                @foreach (var item in Model.Items)
                {
                    <div class="summary-item">
                        <img src="https://via.placeholder.com/150" class="summary-item-image" alt="@item.ProductName">
                        <div class="summary-item-details">
                            <div class="summary-item-name">@item.ProductName</div>
                            <div class="summary-item-quantity">@item.UnitPrice.ToString("N0") VND x @item.Quantity</div>
                        </div>
                        <div class="summary-item-price">@item.LineTotal.ToString("N0") VND</div>
                    </div>
                }
            </div>
        </div>
    </div>
</div>


@section Styles {
    <link rel="stylesheet" href="~/css/orders.css" asp-append-version="true" />
}